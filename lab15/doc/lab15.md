# Лабораторна робота №15. Структуровані типи даних

## 1. Вимоги

### 1.1 Розробник

-   Журавльов Ярослав Юрійович;
    
-   студент групи КІТ-120а;
    
-   29-тра-2020
    

### 1.2 Загальне завдання

Створити структуру, що відображає базовий "базовий клас".
1.  **Розробити**  функцію, яка читає дані(масив елементів) з файлу;
2.  **Розробити**  функцію, яка записує дані(масив елементів) у файлу;
3.  **Розробити**  функцію, яка виводить масив елементів на екран;
4.  **Розробити**  функцію, яка буде сортувати масив елементів за заданим критерієм;
5.  **Розробити**  функцію, яка буде знаходити агенства у місті Харків з 3+ роками на ринку;
6.  **Розробити**  функцію, яка генерує чисельні елементи структури;
7.  **Розробити**  функцію, яка записує дані(масив елементів) у бінарний файлу;
8.  **Розробити**  функцію, яка читає дані(масив елементів) з бінарного файлу;

### 1.3 Індивідуальне завдання

Виконати завдання згідно варіанту.

## 2. Опис програми

### 2.1 Функціональне призначення

За допомогою розроблених функцій можна зчитати масив структур з файлу, відсортувати його за заданим критерієм, та вивести його на екран або у звичайний та бінарний файли.

### 2.2 Опис логічної структури програми

Для створення масиву структур зчитуємо дані з файлу за допомогою функції *read_agencies_text_file* та викликаємо функцію *set_agencies* для перетворення тексту у масив структур.  Для виводу структури на екран та запису її у файл використовуємо функцію *print_agency*.  Для сортування масиву структур використовуємо функцію *sort_agencies_by_options*. Для знаходження агенства за заданим критерієм використовуємо функцію *get_agencies_from_kharkiv_with_3_or_more_years_on_market*. Для генерації даних використовуємо функцію *generate_agency_info_text*. Для читання та запису даних з бінарного файлу використовуємо функції *write_agency_binary*
і *load_agency_binary_by_index*.

##### Функція сортування

*void sort_agencies_by_options*

_Призначення:_ сортує масив структур за заданим параметром

_Схема алгоритму функції_ подана на рис. 1.

_Опис роботи_: за заданим параметром типу *enum AgencySortingOptions* сортує масив структур за допомогою сортування бульбашкою.

_Повертає функція:_ .

![](https://github.com/yzet/Programming/blob/main/lab13/doc/assets/count_of_numbers.png?raw=true)  
  
Рисунок 1 — Схема алгоритму функції *sort_agencies_by_options*
##### Функція вибору з масиву даних
*size_t get_agencies_from_kharkiv_with_3_or_more_years_on_market*

_Призначення:_ записує у інший масив агенства, які пройшли перевірку.

_Схема алгоритму функції_ подана на рис. 2.

_Опис роботи_: визначає кількість елементів, які проходять, виділяє пам'ять під масив, записує у масив елемени, які пройшли.

_Повертає функція_ кількість елементів, які пройшли.

![](https://github.com/yzet/Programming/blob/main/lab13/doc/assets/symbol_is_digit.png?raw=true) 

Рисунок 2 — Схема алгоритму функції *symbol_is_digit*

##### _**Основна функція**_

int main

_Призначення:_ головна функція

_Схема алгоритму функції_ подана на рис. 3.

_Опис роботи: функція почергово викликає функції для вирішення загального завдання.
_Повертає функція_ код повернення програми (0).

![](https://github.com/yzet/Programming/blob/main/lab13/doc/assets/main.png?raw=true)  

Рисунок 3 — Схема алгоритму функції main

#### Структура проекту

```
└── lab15
 ├── Doxyfile
 ├── Makefile
 ├── doc
 │   ├── lab15.md
 │   └── lab15.pdf
 └── src
 	 └── lib.c
	 └── lib.h
	 └── main.c
```

### 2.3 Важливі фрагменти програми
#### Сортування бульбашкою
```c
for (size_t j = 0; j < (count_of_agencies - 1); j++)  
{  
    if ((*agencies + j)->years_on_market > ((*agencies + j + 1))->years_on_market)  
    {  
        struct Agency buff;  
  memcpy(&buff, (*agencies + j), sizeof(struct Agency));  
  memcpy(*agencies + j, *agencies + j + 1, sizeof(struct Agency));  
  memcpy(*agencies + j + 1, &buff, sizeof(struct Agency));  
  }  
}
```
#### Визначення кількості елементів які проходять по критерію
```c
for (size_t i = 0; i < count_of_agencies; i++)  
{  
    if ((agencies + i)->city == Kharkiv && (agencies + i)->years_on_market >= 3)  
    {  
        geting_agencies_count++;  
  }  
}
```
### 3. Варіанти використання

Для демонстрації результатів використовується Clion. Нижче наводиться послідовність дій запуску програми.

Крок 1 (див. рис. 3). Виводиться масив структур відсортований за критерієм(years on market).

![]() 

Рисунок 3 — результат використання функції сортування.

Крок 2 (див. рис. 4). Виводяться агенства, які пройшли за критерієм.

![]() 

Рисунок 2 — результат роботи функції вибору. 

## Висновки

При виконанні даної лабораторної роботи було набуто практичного досвіду роботи із структурами даних, їх зчитування та запису, сортування і вибору.
